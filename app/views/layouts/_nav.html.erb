<nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">GoodBooks4Devs</a>
    <%= form_tag books_path, method: :get,
          class: "navbar-form navbar-left",role:'search' do %>
          <%= select_tag "category",
              options_for_select(Category.all.collect {|category| [ category.name, category.id ] }),
            class:'btn dropdown-toggle btn-default' %>
          <div class="input-group">
            <%= text_field_tag(:search,params[:search],
                  placeholder: "Search book", class: "form-control") %>
            <span class="input-group-btn">
              <%= link_to 'Buscar', new_category_path, class:'btn btn-default' %>
            </span>
          </div>
    <% end %>

    <% if user_signed_in? %>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown"
              role="button" aria-haspopup="true" aria-expanded="false"><%= current_user.name %>
                <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <% if can?(:manage, :all)%>
              <li><%= link_to 'Adicionar novo livro', new_book_path %></li>
              <li><%= link_to 'Gerenciar categorias', categories_path %></li>
            <% end  %>
            <li><%= link_to 'Logout', destroy_user_session_path, method: 'delete' %></li>
          </ul>
        </li>
      </ul>
    <% end %>

    <% if !user_signed_in? %>
        <ul class="nav navbar-nav navbar-right">
          <li><%= link_to 'FaÃ§a seu loguin', new_user_session_path %></li>
          <li><%= link_to 'Cadastre-se', new_user_registration_path %></li>
        </ul>
    <% end %>
  </div>
</nav>
